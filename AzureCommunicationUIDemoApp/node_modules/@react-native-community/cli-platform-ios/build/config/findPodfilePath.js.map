{"version":3,"names":["TEST_PROJECTS","IOS_BASE","findPodfilePath","cwd","podfiles","findAllPodfilePaths","filter","project","path","dirname","test","sort","length","logger","warn","inlineString","join"],"sources":["../../src/config/findPodfilePath.ts"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport {inlineString, logger} from '@react-native-community/cli-tools';\nimport path from 'path';\nimport findAllPodfilePaths from './findAllPodfilePaths';\n\n// Regexp matching all test projects\nconst TEST_PROJECTS = /test|example|sample/i;\n\n// Base iOS folder\nconst IOS_BASE = 'ios';\n\nexport default function findPodfilePath(cwd: string) {\n  const podfiles = findAllPodfilePaths(cwd)\n    /**\n     * Then, we will run a simple test to rule out most example projects,\n     * unless they are located in a `ios` folder\n     */\n    .filter(\n      (project) =>\n        path.dirname(project) === IOS_BASE || !TEST_PROJECTS.test(project),\n    )\n    /**\n     * Podfile from `ios` folder will be picked up as a first one.\n     */\n    .sort((project) => (path.dirname(project) === IOS_BASE ? -1 : 1));\n\n  if (podfiles.length > 0) {\n    if (podfiles.length > 1) {\n      logger.warn(\n        inlineString(`\n          Multiple Podfiles were found: ${podfiles}. Choosing ${podfiles[0]} automatically.\n          If you would like to select a different one, you can configure it via \"project.ios.sourceDir\".\n          You can learn more about it here: https://github.com/react-native-community/cli/blob/master/docs/configuration.md\n        `),\n      );\n    }\n    return path.join(cwd, podfiles[0]);\n  }\n\n  return null;\n}\n"],"mappings":";;;;;;AAQA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;AAAwD;AAVxD;AACA;AACA;AACA;AACA;AACA;AACA;;AAMA;AACA,MAAMA,aAAa,GAAG,sBAAsB;;AAE5C;AACA,MAAMC,QAAQ,GAAG,KAAK;AAEP,SAASC,eAAe,CAACC,GAAW,EAAE;EACnD,MAAMC,QAAQ,GAAG,IAAAC,4BAAmB,EAACF,GAAG;EACtC;AACJ;AACA;AACA,KAHI,CAICG,MAAM,CACJC,OAAO,IACNC,eAAI,CAACC,OAAO,CAACF,OAAO,CAAC,KAAKN,QAAQ,IAAI,CAACD,aAAa,CAACU,IAAI,CAACH,OAAO,CAAC;EAEtE;AACJ;AACA,KAFI,CAGCI,IAAI,CAAEJ,OAAO,IAAMC,eAAI,CAACC,OAAO,CAACF,OAAO,CAAC,KAAKN,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAE,CAAC;EAEnE,IAAIG,QAAQ,CAACQ,MAAM,GAAG,CAAC,EAAE;IACvB,IAAIR,QAAQ,CAACQ,MAAM,GAAG,CAAC,EAAE;MACvBC,kBAAM,CAACC,IAAI,CACT,IAAAC,wBAAY,EAAE;AACtB,0CAA0CX,QAAS,cAAaA,QAAQ,CAAC,CAAC,CAAE;AAC5E;AACA;AACA,SAAS,CAAC,CACH;IACH;IACA,OAAOI,eAAI,CAACQ,IAAI,CAACb,GAAG,EAAEC,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpC;EAEA,OAAO,IAAI;AACb"}